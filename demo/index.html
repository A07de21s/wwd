<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript" src="../third_party/jquery.min.js" ></script>
    <script type="text/javascript" src="../engine/worldwind.min.js" ></script>
    <script type="text/javascript" src="../lib/earth.js"></script>
    <script type="text/javascript" src="../lib/sprite.js"></script>
  </head>
  <body>
    <canvas id="earth_canvas" width=1000 height=800>
      Your browser does not support HTML5 Canvas.
    </canvas>
    <script type="text/javascript">
      var earth = new Earth("earth_canvas");
      var engine = earth.Init();
      var sprite = new Sprite(engine); 

      var image_src = "../img/showdata.png",
          label = "Placemark",
          label_color = WorldWind.Color.YELLOW,
          position = new WorldWind.Position(24.707, 100.092, 1);

      sprite.DrawPlacemark(image_src, position, label, label_color);

      var event_alert = function(o)
      {
        var x = o.clientX,
            y = o.clientY;
        var pickList = engine.pick(engine.canvasCoordinates(x, y));
        if (pickList.objects.length > 0)
        {
          for (var p = 0; p < pickList.objects.length; p++) 
          {
            pickList.objects[p].userObject.highlighted = true;
            console.log(pickList.objects[p]);
            if (pickList.objects[p].isOnTop &&
                  pickList.objects[p].isTerrain)
            {
               sprite.DrawPlacemark(image_src, pickList.objects[p].position, label, label_color);
            }
          }
        }
      }
      engine.addEventListener("mousedown", event_alert);
    </script>
  </body>
</html>
